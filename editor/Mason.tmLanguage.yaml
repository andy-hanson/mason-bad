# [PackageDev] target_format: plist, ext: tmLanguage
name: Mason
scopeName: source.mason
fileTypes:
- mason
uuid: 857c9cc3-2862-4a05-87e7-c7f90f51f1a7

# I keep using this pattern:
# [^\.\s\(\)\[\]\"\\]*
# For names. Don't change it just once, change it everywhere!

patterns:


# Empty string
- name: string
  match: \"\"
# Multi-line string
- name: string
  begin: \"\n
  end: ^$ # on blank line
  patterns:
  - name: constant.character
    comment: Escaped character
    match: \\.
  - name: variable
    comment: Interpolation
    match: \{[^\}]*\}
# Single-line string
- name: string
  begin: \"
  end: \"
  patterns:
  - name: constant.character
    comment: Escaped character
    match: \\.
  - name: variable
    comment: Interpolation
    match: \{[^\}]*\}



- name: support.other
  comment: JavaScript literal
  match: "`[^`]*`"

- name: keyword
  match: \b(use|for|case|else|res|_)\b
- name: keyword
  comment: \@ on its own or before a property
  match: \@


- name: comment
  comment: Block comment
  begin: \\\\\\
  end: \\\\\\


- name: comment
  comment: Single-line comment
  match: \\.*


- name: constant.numeric
  match: \d+(\.\d+)?

- name: support.type
  commment: Type appearing on its own in a case statement.
  match: :\S+


- name: variable
  comment: Local assignment
  match: (([^\s:~]+)(:([^\s~]+))?(~([^\s]+))?\s)+(=)
  captures:
    '3':
      # Colon
      name: comment
    '4':
      # Type
      name: support.type
    '5':
      # Tilde
      name: comment
    '6':
      # Rename
      name: entity.other
    '7':
      # Equals
      name: comment


- name: storage
  comment: Object assignment
  # Match and captures closely mirror those in local assignment.
  match: ([^\.]*)(\.\s)
  #(\s?[^\s:~.]+(:([^\s~.]+))?(~([^\s.]+))?)+(\.)\s
  captures:
    '2':
      # Dot
      name: comment
    #'2':
    #  # Colon
    #  name: comment
    #'3':
    #  # Type
    #  name: support.type
    #'4':
    #  # Tilde
    #  name: comment
    #'5':
    #  # Rename
    #  name: entity.other
    #'6':
    #  # Dot
    #  name: comment


- name: variable.parameter
  begin: (\|)
  beginCaptures:
    '1':
      name: local.define.dot
  end: \n
  patterns:
    - name: support.type
      match: (\:)\S+
      captures:
        '1':
          name: comment
    - name: comment
      match: \\.*



- name: keyword
  match: "[\\(\\[\\{\\}\\]\\)]"
